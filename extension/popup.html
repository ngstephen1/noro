<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
			rel="stylesheet"
		/>
		<style>
			body {
				width: 750px;
				height: 600px;
				padding: 16px;
				font-family: Poppins, Arial, Helvetica, sans-serif;
				overflow-x: hidden;
			}

			h1 {
				font-weight: 600;
				font-size: 64px;
				line-height: 96px;
			}

			h2 {
				font-weight: 600;
				font-size: 40px;
				line-height: 60px;
			}

			h3 {
				font-weight: 600;
				font-size: 25px;
				line-height: 54px;
			}

			h4 {
				font-weight: 800;
				font-size: 20px;
				line-height: 30px;
			}

			.subtitle {
				font-weight: 400;
				font-size: 24px;
				line-height: 36px;
			}

			.paragraph-1 {
				font-weight: 400;
				font-size: 20px;
				line-height: 30px;
			}

			.paragraph-2 {
				font-weight: 400;
				font-size: 18px;
				line-height: 27px;
			}

			.quote {
				font-style: italic;
				font-weight: 400;
				font-size: 20px;
				line-height: 30px;
			}

			button {
				border: none;
				border-radius: 10px;
				padding: 0.75rem;
				font-weight: 400;
				font-size: 18px;
				line-height: 18px;
				box-shadow: 2px 2px 3px 0px rgba(0, 0, 0, 0.5);
				font-family: inherit;
				cursor: pointer;
			}

			.primary {
				color: #ffffff;
				background-color: #1e5aa8;
			}

			.secondary {
				color: #1f2937;
				background-color: #e8f1fa;
			}

			.status-header {
				margin-bottom: 20px;
			}
			.status-badge {
				display: inline-flex;
				align-items: center;
				gap: 8px;
				background: #e8f1fa;
				color: #1e5aa8;
				padding: 6px 12px;
				border-radius: 20px;
				font-size: 14px;
				font-weight: 400;
				margin-bottom: 12px;
			}
			.status-dot {
				width: 6px;
				height: 6px;
				background: #10b981;
				border-radius: 50%;
			}
			.status-message {
				font-size: 28px;
				font-weight: 600;
				color: #1f2937;
				margin-bottom: 4px;
				line-height: 36px;
			}
			.status-subtitle {
				font-size: 16px;
				color: #6b7280;
				font-weight: 400;
				line-height: 24px;
			}
			/* Tracking Status */
			.tracking-status {
				background: #fef3c7;
				border: 1px solid #fbbf24;
				border-radius: 10px;
				padding: 12px;
				margin: 16px 0;
				font-size: 14px;
				color: #92400e;
				line-height: 21px;
			}
			/* Sections */
			.section {
				margin: 24px 0;
			}
			.section-title {
				font-size: 18px;
				font-weight: 600;
				color: #1f2937;
				margin-bottom: 16px;
				line-height: 27px;
			}

			.welcome-back {
				background: linear-gradient(135deg, #1e5aa8 0%, #2563eb 100%);
				color: white;
				padding: 20px;
				border-radius: 10px;
				margin-bottom: 20px;
			}
			.welcome-title {
				font-size: 20px;
				font-weight: 600;
				line-height: 30px;
			}

			.task-card {
				background: #ffffff;
				border: 1px solid #e5e7eb;
				border-radius: 10px;
				padding: 16px;
				margin-bottom: 12px;
				box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
			}
			.task-card:hover {
				border-color: #d1d5db;
				box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
			}
			.task-header {
				display: flex;
				align-items: center;
				gap: 12px;
				margin-bottom: 8px;
			}
			.task-icon {
				width: 24px;
				height: 24px;
				border-radius: 6px;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 14px;
				font-weight: 600;
			}
			.task-icon.email {
				background: #e8f1fa;
				color: #1e5aa8;
			}
			.task-icon.sheets {
				background: #dcfce7;
				color: #16a34a;
			}
			.task-icon.docs {
				background: #fef3c7;
				color: #d97706;
			}
			.task-icon.slides {
				background: #fce7f3;
				color: #be185d;
			}
			.task-title {
				font-size: 18px;
				font-weight: 600;
				color: #1f2937;
				flex: 1;
				line-height: 27px;
			}
			.task-time {
				font-size: 14px;
				color: #6b7280;
				font-weight: 400;
				line-height: 21px;
			}
			.task-context {
				font-size: 14px;
				color: #6b7280;
				margin-bottom: 8px;
				font-weight: 400;
				line-height: 21px;
			}
			.task-description {
				font-size: 16px;
				color: #374151;
				margin-bottom: 12px;
				font-weight: 400;
				line-height: 24px;
			}
			.task-actions {
				display: flex;
				gap: 8px;
			}
			.task-actions button {
				font-size: 16px;
				padding: 8px 16px;
				line-height: 24px;
			}

			.suggestion-card {
				background: #f8fafc;
				border: 1px solid #e2e8f0;
				border-radius: 10px;
				padding: 16px;
				margin-bottom: 8px;
			}
			.suggestion-meta {
				font-size: 12px;
				color: #64748b;
				margin-bottom: 8px;
				font-weight: 400;
				line-height: 18px;
			}

			.recent-item {
				padding: 12px 0;
				border-bottom: 1px solid #f3f4f6;
			}
			.recent-item:last-child {
				border-bottom: none;
			}

			@media (max-height: 600px) {
				.section {
					margin: 16px 0;
				}

				.task-card {
					margin-bottom: 8px;
				}
			}

			::-webkit-scrollbar {
				width: 4px;
			}
			::-webkit-scrollbar-track {
				background: #f1f1f1;
			}
			::-webkit-scrollbar-thumb {
				background: #c1c1c1;
				border-radius: 2px;
			}

			.settings-panel {
				background: #f8fafc;
				border: 1px solid #e2e8f0;
				border-radius: 8px;
				padding: 16px;
				margin: 12px 0;
			}
			.setting-row {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 12px;
				font-size: 14px;
			}
			.mini-btn {
				padding: 4px 8px;
				font-size: 12px;
				margin-left: 8px;
				border-radius: 4px;
			}
			.status-badge {
				display: flex;
				align-items: center;
				gap: 8px;
			}

			/* Header Bar */
			.header-bar {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 16px;
				padding: 12px 0;
				border-bottom: 1px solid #e5e7eb;
			}

			.logo-title {
				font-size: 24px;
				font-weight: 700;
				color: #1e5aa8;
				font-family: inherit;
			}

			.header-btn {
				background: #1e5aa8;
				color: white;
				border: none;
				border-radius: 8px;
				padding: 8px 16px;
				font-size: 14px;
				font-weight: 500;
				cursor: pointer;
				transition: background 0.2s ease;
				font-family: inherit;
			}

			.header-btn:hover {
				background: #164a91;
			}

			/* Main Layout */
			.main-layout {
				display: flex;
				gap: 16px;
				height: calc(100vh - 120px); /* Account for header */
			}

			.left-column {
				flex: 1;
				min-width: 0; /* Allow shrinking */
			}

			.right-column {
				width: 280px;
				flex-shrink: 0;
			}

			/* Main Task Card */
			.main-task-section {
				margin-bottom: 24px;
			}

			.main-task-card {
				background: #ffffff;
				border: 1px solid #e5e7eb;
				border-radius: 12px;
				padding: 24px;
				margin-bottom: 16px;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
			}

			.main-task-welcome {
				font-size: 20px;
				font-weight: 600;
				color: #1f2937;
				margin-bottom: 20px;
			}

			.main-task-header {
				display: flex;
				align-items: center;
				gap: 12px;
				margin-bottom: 16px;
			}

			.main-task-icon {
				width: 24px;
				height: 24px;
				border-radius: 4px;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 16px;
				flex-shrink: 0;
			}

			.main-task-title {
				font-size: 18px;
				font-weight: 600;
				color: #1e5aa8;
				flex: 1;
			}

			.main-task-content {
				margin-bottom: 20px;
			}

			.main-task-section-label {
				font-size: 14px;
				color: #6b7280;
				font-weight: 500;
				margin-bottom: 4px;
				margin-top: 12px;
			}

			.main-task-section-label:first-child {
				margin-top: 0;
			}

			.main-task-description {
				font-size: 16px;
				color: #1f2937;
				margin-bottom: 4px;
				line-height: 1.4;
			}

			.main-task-time {
				display: flex;
				align-items: center;
				gap: 6px;
				font-size: 14px;
				color: #6b7280;
				margin-top: 16px;
			}

			.main-task-actions {
				display: flex;
				gap: 12px;
			}

			.main-task-actions button {
				flex: 1;
			}

			/* Recent Tasks Section */
			.recent-tasks-section {
				background: #ffffff;
				border: 1px solid #e5e7eb;
				border-radius: 12px;
				padding: 20px;
				height: fit-content;
				max-height: 500px;
				overflow-y: auto;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
			}

			.section-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 16px;
			}

			.trash-btn {
				background: none;
				border: none;
				font-size: 16px;
				padding: 4px;
				cursor: pointer;
				opacity: 0.6;
				box-shadow: none;
			}

			.trash-btn:hover {
				opacity: 1;
				background: #f3f4f6;
				border-radius: 4px;
			}

			.recent-task-item {
				background: #f8f9fa;
				border: 1px solid #e9ecef;
				border-radius: 8px;
				padding: 16px;
				margin-bottom: 16px;
			}

			.recent-task-item:hover {
				background: #f1f3f4;
				border-color: #dadce0;
			}

			.recent-task-header {
				display: flex;
				align-items: flex-start;
				gap: 12px;
				margin-bottom: 12px;
			}

			.recent-task-icon {
				width: 24px;
				height: 24px;
				border-radius: 4px;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 16px;
				margin-top: 2px;
				flex-shrink: 0;
			}

			.recent-task-content {
				flex: 1;
				min-width: 0;
			}

			.recent-task-title-row {
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				margin-bottom: 8px;
			}

			.recent-task-title {
				font-size: 16px;
				font-weight: 600;
				color: #1e5aa8;
				flex: 1;
				margin-right: 12px;
			}

			.recent-task-time {
				font-size: 14px;
				color: #6b7280;
				white-space: nowrap;
			}

			.recent-task-meta {
				font-size: 14px;
				color: #374151;
				margin-bottom: 4px;
				line-height: 1.4;
			}

			.recent-task-next {
				font-size: 14px;
				color: #374151;
				margin-bottom: 12px;
				line-height: 1.4;
			}

			.resume-task-link {
				color: #1e5aa8;
				text-decoration: none;
				font-size: 14px;
				font-weight: 600;
				display: inline-flex;
				align-items: center;
			}

			.resume-task-link:hover {
				text-decoration: underline;
			}

			/* Suggested Tasks Container */
			.suggested-tasks-container {
				display: flex;
				flex-direction: column;
				gap: 16px;
			}

			.suggested-section {
				background: #ffffff;
				border: 1px solid #e5e7eb;
				border-radius: 12px;
				padding: 20px;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
			}

			.suggested-header {
				margin-bottom: 12px;
			}

			.suggested-title {
				font-size: 18px;
				font-weight: 600;
				color: #1f2937;
				margin-bottom: 8px;
			}

			.suggested-subtitle {
				font-size: 14px;
				color: #6b7280;
				margin-bottom: 16px;
				line-height: 1.4;
			}

			.suggested-item {
				background: #f8f9fa;
				border: 1px solid #e9ecef;
				border-radius: 8px;
				padding: 16px;
				margin-bottom: 16px;
			}

			.suggested-item-header {
				display: flex;
				align-items: center;
				gap: 12px;
				margin-bottom: 8px;
			}

			.suggested-item-icon {
				width: 24px;
				height: 24px;
				border-radius: 4px;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 16px;
				flex-shrink: 0;
			}

			.suggested-item-content {
				flex: 1;
				min-width: 0;
			}

			.suggested-item-title {
				font-size: 16px;
				font-weight: 600;
				color: #1e5aa8;
				margin-bottom: 4px;
			}

			.suggested-item-meta {
				font-size: 14px;
				color: #6b7280;
				margin-bottom: 12px;
			}

			.suggested-item-question {
				font-size: 14px;
				color: #374151;
				margin-bottom: 16px;
				line-height: 1.4;
			}

			/* Special styling for arrow-type suggestions */
			.suggested-item.arrow-style {
				background: #ffffff;
				border: 1px solid #e5e7eb;
				display: flex;
				align-items: center;
				padding: 16px;
			}

			.suggested-item.arrow-style .suggested-item-content {
				margin-right: 16px;
			}

			.suggested-arrow {
				color: #1e5aa8;
				font-size: 18px;
				font-weight: 600;
			}

			.suggested-actions {
				display: flex;
				gap: 8px;
				margin-top: 12px;
			}

			.suggested-actions button {
				font-size: 14px;
				padding: 6px 12px;
			}

			/* Responsive adjustments */
			@media (max-width: 600px) {
				.main-layout {
					flex-direction: column;
					height: auto;
				}

				.right-column {
					width: 100%;
				}
			}
		</style>
	</head>

	<body>
		<div class="header-bar">
			<div class="logo-title">
				<img
					src="public/assets/icons/idle/icon_idle_32.png"
					alt="Noro"
					style="width: 20px; height: 20px; margin-right: 8px; vertical-align: middle"
				/>
				Noro
			</div>
			<button class="header-btn" id="historyBtn">📚 History</button>
		</div>

		<div class="status-header">
			<div class="status-badge">
				<div class="status-dot"></div>
				<span>Active</span>
				<button id="pauseBtn" class="mini-btn primary">Pause</button>
				<button id="manualCaptureBtn" class="mini-btn secondary">📸</button>
				<button id="settingsBtn" class="mini-btn secondary">⚙️</button>
			</div>
			<div class="status-message">Loading...</div>
			<div class="status-subtitle">Getting your context ready...</div>
		</div>

		<div class="tracking-status" id="trackingStatus" style="display: none"></div>

		<div class="settings-panel" id="settingsPanel" style="display: none">
			<div class="setting-row">
				<span>Idle Detection:</span>
				<input type="range" id="idleSlider" min="15" max="120" value="15" />
				<span id="idleValue">15s</span>
			</div>
			<div class="setting-row">
				<span>Keep Data:</span>
				<select id="retentionSelect">
					<option value="3">3 days</option>
					<option value="7" selected>7 days</option>
					<option value="14">14 days</option>
					<option value="30">30 days</option>
				</select>
			</div>
		</div>

		<!-- Main Content Layout -->
		<div class="main-layout">
			<!-- Left Column -->
			<div class="left-column">
				<!-- Main Task Card -->
				<div id="mainTaskCard" class="main-task-section">
					<div class="welcome-back">
						<div class="welcome-title">Welcome back! 😊</div>
					</div>
				</div>

				<!-- Suggested Tasks Sections -->
				<div id="suggestedTasks" class="suggested-tasks-container">
					<!-- Suggested sections will be populated here -->
				</div>
			</div>

			<!-- Right Column -->
			<div class="right-column">
				<!-- Recent Tasks Section -->
				<div id="recentTasks" class="recent-tasks-section">
					<div class="section-header">
						<div class="section-title">Recent tasks</div>
						<button class="trash-btn" onclick="clearRecentTasks()">🗑️</button>
					</div>
					<div class="recent-tasks-list">
						<!-- Recent tasks will be populated here -->
					</div>
				</div>
			</div>
		</div>

		<script type="module" src="dist/popup.js"></script>
	</body>
</html>
