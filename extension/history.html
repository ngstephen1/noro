<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Noro - Workspace History</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
			rel="stylesheet"
		/>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: Poppins, Arial, Helvetica, sans-serif;
				background: #f8fafc;
				min-height: 100vh;
				color: #1f2937;
			}

			/* Typography - Match popup styles */
			h1 {
				font-weight: 600;
				font-size: 64px;
				line-height: 96px;
			}

			h2 {
				font-weight: 600;
				font-size: 40px;
				line-height: 60px;
			}

			h3 {
				font-weight: 600;
				font-size: 25px;
				line-height: 54px;
			}

			h4 {
				font-weight: 800;
				font-size: 20px;
				line-height: 30px;
			}

			.subtitle {
				font-weight: 400;
				font-size: 24px;
				line-height: 36px;
			}

			.paragraph-1 {
				font-weight: 400;
				font-size: 20px;
				line-height: 30px;
			}

			.paragraph-2 {
				font-weight: 400;
				font-size: 18px;
				line-height: 27px;
			}

			.header {
				background: white;
				padding: 20px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
				border-bottom: 1px solid #e5e7eb;
				position: sticky;
				top: 0;
				z-index: 100;
			}

			.header-content {
				max-width: 1200px;
				margin: 0 auto;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			.logo {
				display: flex;
				align-items: center;
				gap: 12px;
			}

			.logo h1 {
				font-size: 28px;
				font-weight: 700;
				color: #1e5aa8;
			}

			.search-container {
				flex: 1;
				max-width: 400px;
				margin: 0 40px;
				position: relative;
			}

			.search-input {
				width: 100%;
				padding: 12px 20px 12px 45px;
				border: 1px solid #e5e7eb;
				border-radius: 10px;
				font-size: 16px;
				font-family: inherit;
				outline: none;
				transition: all 0.3s ease;
			}

			.search-input:focus {
				border-color: #1e5aa8;
				box-shadow: 2px 2px 3px 0px rgba(0, 0, 0, 0.1);
			}

			.search-icon {
				position: absolute;
				left: 16px;
				top: 50%;
				transform: translateY(-50%);
				color: #6b7280;
				font-size: 18px;
			}

			.controls {
				display: flex;
				gap: 12px;
			}

			/* Button styles matching popup */
			button {
				border: none;
				border-radius: 10px;
				padding: 0.75rem;
				font-weight: 400;
				font-size: 18px;
				line-height: 18px;
				box-shadow: 2px 2px 3px 0px rgba(0, 0, 0, 0.5);
				font-family: inherit;
				cursor: pointer;
			}

			.primary {
				color: #ffffff;
				background-color: #1e5aa8;
			}

			.secondary {
				color: #1f2937;
				background-color: #e8f1fa;
			}

			.btn {
				padding: 10px 20px;
				border: none;
				border-radius: 10px;
				font-weight: 400;
				cursor: pointer;
				transition: all 0.3s ease;
				text-decoration: none;
				display: inline-flex;
				align-items: center;
				gap: 8px;
				font-family: inherit;
				font-size: 16px;
				box-shadow: 2px 2px 3px 0px rgba(0, 0, 0, 0.5);
			}

			.btn-primary {
				background: #1e5aa8;
				color: white;
			}

			.btn-primary:hover {
				background: #164a91;
			}

			.btn-secondary {
				background: #e8f1fa;
				color: #1f2937;
			}

			.btn-secondary:hover {
				background: #d1e7fd;
			}

			.btn-danger {
				background: #ef4444;
				color: white;
			}

			.btn-danger:hover {
				background: #dc2626;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 30px 20px;
			}

			.stats-bar {
				background: white;
				border: 1px solid #e5e7eb;
				border-radius: 10px;
				padding: 20px;
				margin-bottom: 30px;
				display: flex;
				justify-content: space-between;
				align-items: center;
				box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
			}

			.stat-item {
				text-align: center;
			}

			.stat-number {
				font-size: 32px;
				font-weight: 600;
				color: #1e5aa8;
				line-height: 1.2;
			}

			.stat-label {
				font-size: 14px;
				color: #6b7280;
				margin-top: 4px;
				font-weight: 400;
			}

			.workspace-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
				gap: 20px;
				margin-bottom: 40px;
			}

			.workspace-card {
				background: #ffffff;
				border: 1px solid #e5e7eb;
				border-radius: 10px;
				overflow: hidden;
				box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
				transition: all 0.3s ease;
				cursor: pointer;
			}

			.workspace-card:hover {
				border-color: #d1d5db;
				box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
			}

			.workspace-header {
				padding: 16px;
				border-bottom: 1px solid #f3f4f6;
			}

			.workspace-time {
				font-size: 14px;
				color: #6b7280;
				margin-bottom: 8px;
				font-weight: 400;
				line-height: 21px;
			}

			.workspace-summary {
				font-size: 18px;
				font-weight: 600;
				color: #1f2937;
				margin-bottom: 12px;
				line-height: 27px;
			}

			.workspace-stats {
				display: flex;
				gap: 16px;
				font-size: 14px;
				color: #6b7280;
				font-weight: 400;
				line-height: 21px;
			}

			.screenshot-container {
				position: relative;
				height: 200px;
				overflow: hidden;
			}

			.screenshot {
				width: 100%;
				height: 100%;
				object-fit: cover;
				transition: transform 0.3s ease;
			}

			.workspace-card:hover .screenshot {
				transform: scale(1.05);
			}

			.screenshot-overlay {
				position: absolute;
				bottom: 0;
				left: 0;
				right: 0;
				background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
				color: white;
				padding: 20px;
			}

			.tab-list {
				padding: 16px;
			}

			.tab-item {
				display: flex;
				align-items: center;
				gap: 12px;
				padding: 8px 0;
				border-bottom: 1px solid #f3f4f6;
			}

			.tab-item:last-child {
				border-bottom: none;
			}

			/* Task icon styles matching popup */
			.tab-icon {
				width: 24px;
				height: 24px;
				border-radius: 6px;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 14px;
				font-weight: 600;
			}

			.tab-icon.docs {
				background: #fef3c7;
				color: #d97706;
			}
			.tab-icon.sheets {
				background: #dcfce7;
				color: #16a34a;
			}
			.tab-icon.slides {
				background: #fce7f3;
				color: #be185d;
			}
			.tab-icon.email {
				background: #e8f1fa;
				color: #1e5aa8;
			}

			.tab-title {
				flex: 1;
				font-size: 14px;
				color: #374151;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
				font-weight: 400;
				line-height: 21px;
			}

			.tab-time {
				font-size: 12px;
				color: #9ca3af;
				font-weight: 400;
				line-height: 18px;
			}

			.workspace-actions {
				padding: 15px 16px;
				background: #f8fafc;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			.action-btn {
				padding: 8px 16px;
				border: none;
				border-radius: 10px;
				font-size: 14px;
				font-weight: 400;
				cursor: pointer;
				transition: all 0.3s ease;
				font-family: inherit;
				box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
			}

			.action-btn.primary {
				background: #1e5aa8;
				color: white;
			}

			.action-btn.danger {
				background: #ef4444;
				color: white;
			}

			.action-btn.secondary {
				background: #e8f1fa;
				color: #1f2937;
			}

			.action-btn:hover {
				opacity: 0.9;
			}

			.empty-state {
				text-align: center;
				padding: 80px 20px;
				background: white;
				border: 1px solid #e5e7eb;
				border-radius: 10px;
				box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
			}

			.empty-icon {
				font-size: 64px;
				margin-bottom: 20px;
				opacity: 0.5;
			}

			.empty-title {
				font-size: 24px;
				font-weight: 600;
				color: #1f2937;
				margin-bottom: 12px;
				line-height: 36px;
			}

			.empty-subtitle {
				font-size: 16px;
				color: #6b7280;
				margin-bottom: 30px;
				font-weight: 400;
				line-height: 24px;
			}

			.loading {
				text-align: center;
				padding: 60px;
			}

			.spinner {
				width: 40px;
				height: 40px;
				border: 4px solid #f3f4f6;
				border-top: 4px solid #1e5aa8;
				border-radius: 50%;
				animation: spin 1s linear infinite;
				margin: 0 auto 20px;
			}

			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			.modal {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.5);
				z-index: 1000;
			}

			.modal-content {
				background: white;
				margin: 50px auto;
				padding: 30px;
				width: 90%;
				max-width: 800px;
				border-radius: 10px;
				position: relative;
				box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.15);
			}

			.close {
				position: absolute;
				top: 15px;
				right: 20px;
				font-size: 24px;
				cursor: pointer;
				color: #6b7280;
				font-weight: 400;
			}

			.close:hover {
				color: #1f2937;
			}

			@media (max-width: 768px) {
				.header-content {
					flex-direction: column;
					gap: 20px;
				}

				.search-container {
					margin: 0;
					max-width: none;
				}

				.workspace-grid {
					grid-template-columns: 1fr;
				}

				.stats-bar {
					flex-direction: column;
					gap: 20px;
				}
			}
		</style>
	</head>
	<body>
		<div class="header">
			<div class="header-content">
				<div class="logo">
					<h1>
						<img
							src="public/assets/icons/idle/icon_idle_32.png"
							alt="Noro"
							style="width: 24px; height: 24px; margin-right: 8px; vertical-align: middle"
						/>
						Noro History
					</h1>
				</div>
				<div class="search-container">
					<span class="search-icon">üîç</span>
					<input
						type="text"
						class="search-input"
						placeholder="Search workspaces, documents, or activities..."
						id="searchInput"
					/>
				</div>
				<div class="controls">
					<button class="btn btn-secondary" id="clearAllBtn">üóëÔ∏è Clear All</button>
					<button class="btn btn-primary" id="backToDashboard">‚Üê Back to Dashboard</button>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="stats-bar" id="statsBar">
				<div class="stat-item">
					<div class="stat-number" id="totalWorkspaces">0</div>
					<div class="stat-label">Total Captures</div>
				</div>
				<div class="stat-item">
					<div class="stat-number" id="totalTabs">0</div>
					<div class="stat-label">Tabs Tracked</div>
				</div>
				<div class="stat-item">
					<div class="stat-number" id="totalDays">0</div>
					<div class="stat-label">Days of History</div>
				</div>
				<div class="stat-item">
					<div class="stat-number" id="storageUsed">0 MB</div>
					<div class="stat-label">Storage Used</div>
				</div>
			</div>

			<div id="loadingState" class="loading">
				<div class="spinner"></div>
				<div>Loading your workspace history...</div>
			</div>

			<div id="workspaceGrid" class="workspace-grid" style="display: none">
				<!-- Workspace cards will be dynamically inserted here -->
			</div>

			<div id="emptyState" class="empty-state" style="display: none">
				<div class="empty-icon">üì≠</div>
				<div class="empty-title">No workspace history yet</div>
				<div class="empty-subtitle">Start browsing and working to build your productivity timeline</div>
				<button class="btn btn-primary" id="emptyStateDashboard">Go to Dashboard</button>
			</div>
		</div>

		<!-- Modal for detailed workspace view -->
		<div id="workspaceModal" class="modal">
			<div class="modal-content">
				<span class="close" id="closeModal">&times;</span>
				<div id="modalContent">
					<!-- Modal content will be dynamically inserted here -->
				</div>
			</div>
		</div>

		<script type="module" src="dist/history.js"></script>
	</body>
</html>
